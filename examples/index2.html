<!DOCTYPE HTML>
<html>
  <head>
    <title>MapboxGL Legend</title>
    <meta charset='utf-8'>
    <link rel='stylesheet' href='node_modules/mapbox-gl/dist/mapbox-gl.css'/>
    <script type='text/javascript' src='node_modules/mapbox-gl/dist/mapbox-gl.js'></script>
    <script type='text/javascript' src='mapbox-gl-legend.js'></script>
  </head>
  <body style='margin:0'>
    <div id='map' style='height:100vh;width:100wh'></div>
  </body>
  <script>
    const map = new mapboxgl.Map({
      container: 'map',
      style: 'https://openmaptiles.github.io/osm-bright-gl-style/style-cdn.json',
      center: [16.913988783638445, 52.357498181163635],
      zoom: 8
    })
    let legend
    map.on('load', () => {
      map.addSource('sourceid_layer', {
        'type': 'geojson',
        'data': {
          type: 'Feature',
          properties: {
            'type': 'Polygon'
          },
          geometry: {
            type: 'Polygon',
            coordinates: [[
              [16.79685115814209,52.45684622754481],
              [17.103095054626465,52.45600939264076],
              [17.083868980407715,52.29924157848631],
              [16.696600914001465,52.300081389496114],
              [16.79685115814209,52.45684622754481]
            ]]
          }
        }
      })
      map.addSource('sourceid_layer2', {
        'type': 'geojson',
        'data': {
          type: 'Feature',
          properties: {
            'type': 'Polygon'
          },
          geometry: {
            type: 'Polygon',
            coordinates: [[
              [16.79685115814209,52.45684622754481],
              [17.103095054626465,52.45600939264076],
              [17.083868980407715,52.29924157848631],
              [16.696600914001465,52.300081389496114],
              [16.79685115814209,52.45684622754481]
            ]]
          }
        }
      })
      let overlays = {
        'Layer Name Point': {
          'id': 'id_layer',
          'source': 'sourceid_layer',
          'type': 'circle',
          'paint': {
            'circle-radius': 10,
            'circle-color': '#007cbf'
          }
        },
        'Layer Name Polygon': {
          'id': 'id_layer2',
          'source': 'sourceid_layer2',
          'type': 'fill',
          'paint': {
            'fill-color': '#e50000',
            'fill-opacity': 1
          }
        }
      }
      for(let layerName in overlays) map.addLayer(overlays[layerName])
      legend = new MapboxLegend(overlays)
      map.addControl(legend)
    })
  </script>
</html>